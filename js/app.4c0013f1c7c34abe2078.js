!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={0:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([161,1]),n()}({100:function(e,t,n){e.exports=n.p+"songs/03_Nothing_Stops_Detroit.mp3"},101:function(e,t,n){e.exports=n.p+"songs/04_Gnosis_Hardware.mp3"},102:function(e,t,n){e.exports=n.p+"songs/06_Out_Here_At_The_Outersphere.mp3"},103:function(e,t,n){e.exports=n.p+"songs/07_Chicago.mp3"},104:function(e,t,n){e.exports=n.p+"songs/08_Passports.mp3"},105:function(e,t,n){e.exports=n.p+"songs/09_Come_True.mp3"},106:function(e,t,n){e.exports=n.p+"songs/shuffle.mp3"},150:function(e,t,n){var a=n(151),i=n(152);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},o=(a(i,r),i.locals?i.locals:{});e.exports=o},152:function(e,t,n){var a=n(153),i=n(154),r=n(155),o=n(156),s=n(157),l=n(158),c=n(159),u=n(160);(t=a(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Press+Start+2P);"]);var d=i(r),p=i(o),h=i(s),m=i(l),f=i(c),g=i(u);t.push([e.i,'*{box-sizing:border-box;font-size:inherit}html{height:calc(var(--vh, 1vh) * 100);overflow:hidden}body{font-family:"Press Start 2P", "Monaco", monospace;font-size:22px;font-weight:500;line-height:1.3;height:calc(var(--vh, 1vh) * 100);overflow:hidden;color:#444;margin:0;background:black}p{margin-top:0}em{font-family:"Georgia", serif}.pointer{cursor:pointer}.overlay{background:black;position:fixed;top:0;bottom:0;right:0;left:0;z-index:100}#root{width:100%;height:100%;height:calc(var(--vh, 1vh) * 100);max-width:133.333vh;max-width:calc(var(--vh, 1vh) * 133.33);margin:0 auto;overflow:hidden}#root>div{height:100%;width:100%;position:relative}canvas{position:absolute;bottom:0;text-rendering:optimizelegibility;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated}.cubes canvas{z-index:89}.menu canvas{z-index:90}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(-360deg)}}.StarField{top:0;width:100%;height:100%;position:absolute}.StarField:after{content:"";background:url('+d+') no-repeat;background-size:cover;background-color:black;position:absolute;left:-35%;right:-35%;top:-35%;bottom:-35%;animation-name:spin;animation-duration:500s;animation-iteration-count:infinite;animation-timing-function:linear;z-index:-1}.StarField canvas{position:relative;top:0;left:0;right:0;bottom:0;z-index:1}@keyframes fadeInOut{0%{opacity:0}10%{opacity:1}75%{opacity:1}100%{opacity:0}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.dashboard,.dashboard:after{content:"";background:url('+p+") no-repeat;background-size:100% 50%;background-position:0 100%;position:absolute;left:0;bottom:0;width:50%;z-index:20;padding-bottom:91%;text-rendering:optimizelegibility;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated}.dashboard:after{left:99.9%;right:0;transform:scaleX(-1);width:100%;background-size:100% 100%}header{position:relative;text-rendering:optimizelegibility;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated}header .info{background:url("+h+') top center/cover no-repeat;width:100%;height:0;padding-top:calc(36 / 254 * 100%);margin:0 auto;position:relative;z-index:2}header .info .time,header .info .track{position:absolute;top:24%;left:50%;width:8%;line-height:0}header .info .time img,header .info .track img{width:100%}header .info .track{left:15%;width:11.79%}header .info .track-number{font-size:calc(var(--scene-width) / 20);position:absolute;left:28%;top:18%;color:#004848;-webkit-font-smoothing:none}header .info .timer{font-size:calc(var(--scene-width) / 22);position:absolute;left:60%;top:20%;color:#004848;-webkit-font-smoothing:none}.music-picker{background:white}.FileReader,.About{padding:2em;height:100%;cursor:default;font-size:14px}.FileReader:before,.About:before{position:absolute;left:0;right:0;bottom:0;top:0;content:" ";display:block;filter:brightness(0);text-rendering:optimizelegibility;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;background:url('+m+") repeat-y;background-position:center;background-size:contain;z-index:-1;animation-name:menuBrightness;animation-duration:1s;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-delay:500ms}@keyframes menuBrightness{from{filter:brightness(0)}to{filter:brightness(1)}}.FileReader .content,.About .content{text-align:center;max-width:800px;margin:0 auto;opacity:0;animation-name:menuContentFadeIn;animation-duration:10ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-delay:1.35s}@keyframes menuContentFadeIn{from{opacity:0}to{opacity:1}}.FileReader h2,.About h2{background:url("+f+');background-color:rgba(0,0,0,0.5);border-radius:10px;line-height:53px;padding:0 1.5em;background-size:100% 100%;text-rendering:optimizelegibility;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;color:white;text-transform:capitalize;margin:0 auto;margin-bottom:2em;display:inline-block}.FileReader h3,.About h3{color:white;margin:0 0 2em}.FileReader button,.About button{cursor:pointer;margin:0 10px}.FileReader .playlists,.About .playlists{background-color:rgba(131,23,71,0.65);border-radius:3px;height:50%;box-shadow:0 0 0 2px rgba(53,59,101,0.8),0 0 0 3.5px rgba(149,149,149,0.8),0 0 0 5px rgba(53,59,101,0.8);font-size:13px;color:white;font-weight:400;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;margin:0 0 2em;max-height:calc(var(--vh, 1vh) * 72);overflow:scroll}@media screen and (min-width: 500px){.FileReader .playlists,.About .playlists{padding:1em}}.FileReader .playlists .draggable,.About .playlists .draggable{cursor:grab;padding:8px 10px;border-radius:2px;margin:0 0 2px;display:flex;flex-direction:row;text-align:left;font-size:10px}@media screen and (min-width: 500px){.FileReader .playlists .draggable,.About .playlists .draggable{font-size:16px}}.FileReader .playlists .draggable p,.About .playlists .draggable p{margin:0;padding:0}.FileReader .playlists .draggable:hover,.About .playlists .draggable:hover{animation:selectedItem 3s infinite}.FileReader .playlists .draggable:active,.About .playlists .draggable:active{cursor:grabbing !important}.FileReader .playlists .draggable.isDragging,.About .playlists .draggable.isDragging{cursor:grabbing;border:1px white;background:rgba(255,255,255,0.5);border-radius:2px}.FileReader .playlists .draggable div:nth-child(1),.About .playlists .draggable div:nth-child(1){width:40px}.FileReader .playlists .draggable div:nth-child(2),.About .playlists .draggable div:nth-child(2){width:40%;max-width:400px}.FileReader .playlists .draggable div:nth-child(3),.About .playlists .draggable div:nth-child(3){width:25%;max-width:200px}.FileReader .playlists .draggable div:nth-child(4),.About .playlists .draggable div:nth-child(4){width:25%;max-width:200px}.FileReader .playlists .draggable button,.About .playlists .draggable button{transition:all 200ms ease;margin:0;margin-left:auto;width:10px;appearance:none;border:none;outline:none;background:none;color:rgba(255,255,255,0.6);cursor:pointer;border-radius:2px;width:30px;border:1px solid rgba(255,255,255,0.25);text-align:center}.FileReader .playlists .draggable button:hover,.About .playlists .draggable button:hover{background:darkslategrey;border:1px solid darkslategrey;color:white}.About .content{line-height:22px}.About .content .playlists{font-size:16px !important;text-align:left;padding:1em}.About .content em{margin:0.5em;padding:1em 1em 1em 2em;display:inline-block;border-left:2px solid white}.About .content a{text-decoration:none;color:#f2f2f2;font-weight:bold;margin-left:0.5em}.About .content ul{margin-top:2em}.About .content ul li{list-style-type:none;margin-bottom:15px}@keyframes floatDownRelative{from{transform:translateY(0%)}to{transform:translateY(100%)}}@keyframes floatUpRelative{from{transform:translateY(0%)}to{transform:translateY(-105%)}}@keyframes floatDownButtons{from{transform:translateY(0%)}to{transform:translateY(50vh)}}@keyframes blink{0%{opacity:0}49%{opacity:0}50%{opacity:1}}@keyframes selectedItem{0%{background:rgba(255,255,255,0.7)}50%{background:pink}100%{background:rgba(255,255,255,0.7)}}.hidden .toast{animation:blink 1s infinite, fadeOut 0ms linear 3s 1 forwards running !important}.hidden header{animation-name:floatUpRelative;animation-duration:1000ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:ease-out}.hidden .dashboard,.hidden .cubes canvas,.hidden li{animation-name:floatDownRelative;animation-duration:2000ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:linear}.hidden li{animation-name:floatDownButtons;animation-duration:400ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:ease-in}.hidden li:nth-child(1){animation-delay:1400ms;animation-duration:300ms}.hidden li:nth-child(2){animation-delay:1300ms;animation-duration:300ms}.hidden li:nth-child(3){animation-delay:1100ms;animation-duration:300ms}.hidden li:nth-child(4){animation-delay:780ms;animation-duration:350ms}.hidden li:nth-child(5){animation-delay:800ms;animation-duration:350ms}.hidden li:nth-child(6){animation-delay:1000ms;animation-duration:350ms}.hidden li:nth-child(7){animation-delay:680ms}.hidden li:nth-child(8){animation-delay:600ms}.hidden li:nth-child(9){animation-delay:720ms}.hidden li button.bottom:after,.hidden li a.bottom:after{animation-name:fadeOut;animation-duration:200ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:linear}.hidden .tooltips{display:none !important}@keyframes toolTip{from{opacity:1}to{opacity:0}}.tooltips p{position:absolute;background:rgba(255,255,255,0.5);left:50%;transform:translate(-50%, 0);bottom:0;z-index:70;padding:5px 10px;text-align:center;font-size:calc(var(--scene-width) / 60);display:inline-block}.tooltips img{height:30px;width:auto;bottom:20px;text-rendering:optimizelegibility;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated}.tooltips strong{font-weight:normal;color:#ff2034}@keyframes knight-rider{from{left:25%}to{left:69%}}.knight-rider{display:none;content:"";background:url('+g+") no-repeat;background-position:center center;background-size:100% 100%;height:12%;width:6%;position:absolute;left:50%;bottom:5%;z-index:1;animation-name:knight-rider;animation-duration:1300ms;animation-iteration-count:infinite;animation-timing-function:linear}.playing .knight-rider{display:inline-block}blink{animation:blink 1s infinite}.toast{position:fixed;left:50%;top:40%;transform:translate(-50%, -50%);width:6em;z-index:9999}.paused .knight-rider{display:inline-block;animation-play-state:paused}.paused .timer,.paused .toast,.paused .knight-rider{animation:blink 1s infinite}@keyframes floatInRelative{from{transform:translateY(100%)}to{transform:translateY(0%)}}@keyframes floatDownInRelative{from{transform:translateY(-105%)}to{transform:translateY(0%)}}@keyframes floatInButtons{from{transform:translateY(50vh)}to{transform:translateY(0%)}}.show header{animation-name:floatDownInRelative;animation-duration:600ms;animation-iteration-count:1;animation-fill-mode:backwards;animation-timing-function:linear;animation-delay:700ms}.show .dashboard,.show .cubes canvas{animation-name:floatInRelative;animation-duration:800ms;animation-iteration-count:1;animation-fill-mode:backwards;animation-timing-function:linear;animation-delay:300ms}.show li button.bottom:after,.show li a.bottom:after{animation-name:fadeOut;animation-duration:200ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:linear}.flip{transform:scaleX(-1);display:inline-block}.current-track-info{font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif;font-weight:lighter;font-size:12px;color:white;position:absolute;bottom:50vw;left:10px;z-index:999;opacity:0;text-transform:uppercase;animation-name:fadeInOut;animation-duration:12s;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:linear}@media screen and (min-width: 800px){.current-track-info{bottom:10px;left:10px}}.current-track-info p{margin:0}.current-track-info a{text-decoration:underline;font-weight:normal;color:white}.start-context{position:fixed;z-index:9999;background:rgba(10,5,25,0.5);left:0;right:0;bottom:0;top:0;display:flex;text-align:center;align-items:center;justify-content:center;font-size:16px}.start-context button{transition:background-color 250ms ease;background:none;border:1px solid white;color:white;padding:.5em 1.5em;font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif;font-weight:normal;color:white;border-radius:2px;background:rgba(0,0,0,0.75);box-shadow:0 5px 20px 10px rgba(255,255,255,0.2)}.start-context button span{display:block;margin-bottom:8px;padding-bottom:8px;border-bottom:.5px solid white}.start-context button:hover,.start-context button:active{background:rgba(255,255,255,0.25);cursor:pointer}\n",""]),e.exports=t},155:function(e,t,n){e.exports=n.p+"images/galaxy.png"},156:function(e,t,n){e.exports=n.p+"images/dashboard.png"},157:function(e,t,n){e.exports=n.p+"images/header.png"},158:function(e,t,n){e.exports=n.p+"images/menuBg.png"},159:function(e,t,n){e.exports=n.p+"images/header_bg.png"},160:function(e,t,n){e.exports=n.p+"images/knight-rider.png"},161:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"loadingStart",(function(){return X})),n.d(a,"loadingFinish",(function(){return W})),n.d(a,"toggleRepeat",(function(){return Z})),n.d(a,"playing",(function(){return Q})),n.d(a,"paused",(function(){return J})),n.d(a,"setCurrentTrack",(function(){return $})),n.d(a,"addTracks",(function(){return ee})),n.d(a,"arrangeTracks",(function(){return te})),n.d(a,"removeTrack",(function(){return ne}));var i=n(0),r=n.n(i),o=n(26),s=n.n(o),l=n(38),c=n.n(l),u=n(21),d=n.n(u),p=n(8),h=n.n(p),m=n(9),f=n.n(m),g=n(14),y=n.n(g),v=n(15),b=n.n(v),w=n(12),k=n.n(w),x=n(16),E=n.n(x),S=n(3),A=n.n(S),C=n(20);function R(e){Object.getOwnPropertyNames(e.constructor.prototype).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}var M=n(2);function T(e){for(var t=0,n=0;n<e.length;n++)e[n]&&(t+=e[n]);return t/e.length}var D=function(){var e=window.innerWidth,t=1.3333*window.innerHeight;return t>e?(document.documentElement.style.setProperty("--scene-width",e+"px"),e):(document.documentElement.style.setProperty("--scene-width",t+"px"),t)},O=function(e){var t=Math.trunc(e/60).toString().padStart(2,"0"),n=Math.trunc(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)},z=function(){return Math.floor(Math.random()*Math.floor(2))+2},F=function(e){return Math.random()*e-.5*e};function P(e,t,n){e.wrapS=M.RepeatWrapping,e.wrapT=M.RepeatWrapping,e.repeat.set(1/t,1);var a=0,i=0;this.update=function(r){for(a+=r;a>n;){a-=n,(i+=1)===t&&(i=0);var o=i%t;e.offset.x=o/t}}}var L=function(){function e(t){h()(this,e),this.audio=t,this.leftChannel=[],this.rightChannel=[],this.setupAudioNodes(),R(this)}return f()(e,[{key:"setupAudioNodes",value:function(){var e=this,t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t;var n=/iP(hone|od|ad)/.test(navigator.platform);(navigator.userAgent.indexOf("Firefox")>0||n)&&this.audioContext.suspend().then((function(){console.log(e.audioContext)})).catch((function(e){return console.log(e)}));var a=this.createAnalyserNode(),i=this.createAnalyserNode(),r=this.audioContext.createChannelSplitter(2);this.audioContext.createMediaElementSource(this.audio).connect(r),r.connect(a,0),r.connect(i,1),this.dataArrayLeft=new Uint8Array(a.frequencyBinCount),this.dataArrayRight=new Uint8Array(i.frequencyBinCount),this.analyserLeft=a,this.analyserRight=i}},{key:"createAnalyserNode",value:function(){var e=this.audioContext.createAnalyser();return e.smoothingTimeConstant=.1,e.fftSize=128,e.connect(this.audioContext.destination),e}},{key:"runAnalysis",value:function(){var e=this.analyserLeft,t=this.analyserRight,n=this.dataArrayLeft,a=this.dataArrayRight;e.getByteFrequencyData(n),t.getByteFrequencyData(a),this.leftChannel=n,this.rightChannel=a,this.frameId=requestAnimationFrame(this.runAnalysis)}},{key:"startAnalyser",value:function(){this.frameId=this.frameId||requestAnimationFrame(this.runAnalysis)}},{key:"pauseAnalyser",value:function(){cancelAnimationFrame(this.frameId),this.frameId=void 0}},{key:"start",value:function(){"suspended"!==this.audioContext.state&&this.startAnalyser()}},{key:"pause",value:function(){this.pauseAnalyser()}},{key:"stop",value:function(){this.pauseAnalyser(),this.audioContext.close()}},{key:"averageFFT",get:function(){return[T(this.leftChannel),T(this.rightChannel)]}},{key:"rawFFT",get:function(){return[this.leftChannel,this.rightChannel]}}]),e}(),N=n(29),I=n.n(N),j=n(62),q=n.n(j),_=n(19),B=n.n(_),U=(n(98),n(99),n(100),n(101),n(63)),H=n.n(U);n(102),n(103),n(104),n(105),n(106);function Y(e){var t=function(e,t){if("object"!==I()(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==I()(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===I()(t)?t:String(t)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){B()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={currentTrack:null,loading:!1,repeat:"off",currentTime:O(0),playing:!1,paused:!1,playlist:["NoRefuge"],tracks:{NoRefuge:{file:H.a,track:1,album:"Entertainment System",artist:"Professor Kliq",title:"No Refuge",href:"https://www.professorkliq.com"}}},X=function(){return Mt.dispatch({type:"LOADING_STARTED",data:{loading:!0}})},W=function(){return Mt.dispatch({type:"LOADING_FINISHED",data:{loading:!1}})},Z=function(e){return Mt.dispatch({type:"TOGGLE_REPEAT",data:{repeat:e}})},Q=function(){return Mt.dispatch({type:"PLAYING"})},J=function(){return Mt.dispatch({type:"PAUSED"})},$=function(e){return Mt.dispatch({type:"SET_CURRENT_TRACK",data:{trackIndex:e}})},ee=function(e){return Mt.dispatch({type:"ADD_TRACKS",data:{tracks:e}})},te=function(e){return Mt.dispatch({type:"ARRANGE_TRACKS",data:{playlist:e}})},ne=function(e){return Mt.dispatch({type:"REMOVE_TRACK",data:{trackIndex:e}})},ae=function(){function e(){h()(this,e),this.audioElement=new Audio,this.audioElement.crossOrigin="anonymous",this.repeat="off",this.reduxState=K,this.changeSrc=!0,this.analyser=new L(this.audioElement),this.setupEventListeners(),this.syncManagerWithStore(),R(this)}return f()(e,[{key:"syncManagerWithStore",value:function(){var e=this;Mt.subscribe((function(){e.reduxState=Mt.getState().audio,e.reduxState.currentTrack!==e.currentTrack?(e.currentTrack=e.reduxState.currentTrack,e.changeTrack=!0):e.changeTrack=!1}))}},{key:"togglePlay",value:function(){var e=this.audioElement;e.src||$(0),e.paused||e.ended?this.playAndReport():e.pause()}},{key:"playAndReport",value:function(){var e=this.reduxState,t=e.tracks,n=e.playlist,a=e.currentTrack,i=t[n[void 0===a?0:a]].file;if(i instanceof File){var r=URL.createObjectURL(i);this.audioElement.src=r,this.audioElement.play()}else{var o=i.split("./songs"),s=o.length>0?o[1]:i;this.audioElement.src&&this.audioElement.src.includes(s)||(this.audioElement.src=i),this.audioElement.play()}}},{key:"revokeSongUrl",value:function(){var e=this.reduxState,t=e.tracks,n=e.playlist,a=e.currentTrack,i=void 0===a?0:a;if(1!==n.length){var r=t[n[i]].file;r instanceof File&&URL.revokeObjectURL(r)}}},{key:"loadNext",value:function(e){this.revokeSongUrl();var t=this.reduxState.currentTrack+1;t>=this.reduxState.playlist.length?($(0),e&&"context"!==this.reduxState.repeat||this.playAndReport()):($(t),this.playAndReport())}},{key:"loadPrevious",value:function(){this.revokeSongUrl();var e=this.reduxState.currentTrack;$(e?e-1:0),this.playAndReport()}},{key:"setupEventListeners",value:function(){var e=this;this.audioElement.addEventListener("loadstart",(function(){return X()})),this.audioElement.addEventListener("canplaythrough",(function(){return W()})),this.audioElement.addEventListener("play",(function(){Q(),e.analyser.start()})),this.audioElement.addEventListener("pause",(function(){J(),e.analyser.pause()})),this.audioElement.addEventListener("ended",(function(){"track"===e.reduxState.repeat?e.togglePlay():e.loadNext(!0)}))}},{key:"nextTrack",value:function(){this.loadNext()}},{key:"previousTrack",value:function(){this.audioElement.currentTime>=3?this.audioElement.currentTime=0:this.loadPrevious()}},{key:"pause",value:function(){this.audioElement.pause()}},{key:"stop",value:function(){this.audioElement.pause(),this.audioElement.currentTime=0}},{key:"toggleRepeat",value:function(){var e;switch(this.reduxState.repeat){case"off":e="track";break;case"track":e="context";break;default:e="off"}Z(e)}},{key:"analyserFFT",get:function(){return this.analyser.averageFFT}},{key:"rawFFT",get:function(){return this.analyser.rawFFT}},{key:"currentTime",get:function(){return this.audioElement.currentTime}}]),e}(),ie=n(10),re=n.n(ie),oe=n(39),se=n.n(oe),le=n(11),ce=function(e,t){var n,a,i,r=142.5-(n=.75*t,a=Math.log(1),i=(Math.log(142)-a)/100,Math.exp(a+i*(n-0))),o=new M.Color("hsl(".concat(r>0?r:0,", 100%, 48%)"));e.material.color.set(o)},ue=function(e,t){ce(e,t);var n=.008*t+.5,a=n<1.65?n:1.65;return e.morphTargetInfluences[0]=.007*t>1?1:.007*t,new le.Tween(e.scale).to({x:a,y:a,z:a},100).easing(le.Easing.Quadratic.Out).start()},de=function(e,t){return Math.random()*(e-t)+t},pe=function(e,t){var n=t?-Math.abs(.03):.03,a=t?-Math.abs(.01):.01;e.rotateX(de(n,a)),e.rotateY(de(n,a))},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;a?e.position.y+=.0075:n&&(e.position.y-=.0075),e.rotateY(.0025*t)},me=function(e){function t(e){var n;return h()(this,t),(n=y()(this,b()(t).call(this,e))).debouncedResize=null,n.loader=new se.a,n.animateDownL=!0,n.animateUpL=!1,n.animateDownR=!0,n.animateUpR=!1,R(k()(n)),window.addEventListener("resize",(function(){clearTimeout(n.debouncedResize),n.debouncedResize=setTimeout(n.onResize,250)})),window.addEventListener("orientationchange",(function(){n.onResize()})),n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.setupScene()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.hidden!==e.hidden}},{key:"onResize",value:function(){var e=D(),t=.75*e;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"setupScene",value:function(){var e=D(),t=.75*e,n=new M.Scene,a=new M.PerspectiveCamera(20,e/t,1,1200);a.position.z=45,a.position.y=-27;var i=new M.AmbientLight(16777215,.35),r=new M.DirectionalLight(16777215,.7);r.position.set(0,500,900),n.add(i,r);var o=new M.WebGLRenderer({alpha:!0,antialias:!1}),s=(-1!==navigator.userAgent.indexOf("Safari")&&navigator.userAgent.indexOf("Chrome"),window.devicePixelRatio);o.setPixelRatio(1===s?.5*s:.25*s),o.setSize(e,t),this.scene=n,this.camera=a,this.renderer=o,this.setupCube("leftCube",[-6.75,-29.3,0]),this.setupCube("rightCube",[6.75,-29.7,0]),this.mount.appendChild(this.renderer.domElement)}},{key:"setupCube",value:function(e,t){var n=this,a=re()(t,3),i=a[0],r=a[1],o=a[2];this.loader.load("./models/cubeBigger.gltf",(function(t){var a=re()(t.scene.children,3)[2];a.material.color=new M.Color("hsl(143, 100%, 48%)"),a.position.set(i,r,o),a.rotateX(.075),"rightCube"===e?a.rotateY(.075):a.rotateY(-.1),n[e]=a,n.scene.add(a),"rightCube"===e&&n.props.setAnimationCallback(n.animate)}))}},{key:"animate",value:function(){if(this.props.playing){var e=re()(this.props.audioManager.analyserFFT,2),t=e[0],n=e[1];this.leftCube.position.y=-29,this.rightCube.position.y=-29,ue(this.leftCube,t),ue(this.rightCube,n),pe(this.leftCube),pe(this.rightCube,-1)}else{var a=this.leftCube.position.y;a>=-28.25&&!this.animateDownL&&(this.animateDownL=!0,this.animateUpL=!1),a<=-30.25&&!this.animateUpL&&(this.animateUpL=!0,this.animateDownL=!1);var i=this.rightCube.position.y;i>=-28.25&&!this.animateDownR&&(this.animateDownR=!0,this.animateUpR=!1),i<=-30.25&&!this.animateUpR&&(this.animateUpR=!0,this.animateDownR=!1),he(this.leftCube,.35,this.animateDownL,this.animateUpL),he(this.rightCube,.35,this.animateDownR,this.animateUpR)}this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"cubes",ref:function(t){e.mount=t}})}}]),t}(r.a.Component);me.propTypes={playing:A.a.bool.isRequired};var fe=me,ge=n(64),ye=n.n(ge),ve=n(65),be=n.n(ve),we=n(66),ke=n.n(we),xe=n(67),Ee=n.n(xe),Se=n(68),Ae=n.n(Se),Ce=n(69),Re=n.n(Ce),Me=n(70),Te=n.n(Me),De=n(71),Oe=n.n(De),ze=n(72),Fe=n.n(ze),Pe=n(73),Le=n.n(Pe),Ne=n(74),Ie=n.n(Ne),je=new M.CylinderGeometry(1.45,1.45,.35,12,1,!0),qe=(new M.TextureLoader).load(Fe.a),_e=(new M.TextureLoader).load(Le.a);qe.magFilter=M.NearestFilter,_e.magFilter=M.NearestFilter;var Be=new M.MeshBasicMaterial({side:M.DoubleSide,transparent:!0,map:qe}),Ue=new M.MeshBasicMaterial({side:M.DoubleSide,transparent:!0,map:_e}),He=new M.PlaneGeometry(2,2,1,1),Ye=new M.PlaneGeometry(1.5,1.5,1,1),Ge=(new M.TextureLoader).load(Ie.a);function Ve(e,t){var n,a,i,r,o,s,l,c,u,d,p;n=e.position,a=t,i={duration:e.material.userData.animationDuration,delay:e.material.userData.animationDelay,easing:le.Easing.Quadratic.InOut},r=a.x,o=a.y,s=a.z,l=i.easing,c=void 0===l?le.Easing.Quadratic.In:l,u=i.delay,d=i.duration,p=void 0===d?2e3:d,new le.Tween(n).to({x:r,y:o,z:s},p).easing(c).delay(u).start()}var Ke=n(75),Xe=n.n(Ke),We=n(76),Ze=n.n(We),Qe=n(77),Je=n.n(Qe);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var et=function(e){function t(e){var n;return h()(this,t),(n=y()(this,b()(t).call(this,e))).timeOut=null,n.planes=[],n.shadowPlanes=[],n.buttonEffect=new Audio,n.buttonEffect.src=Ze.a,n.highlightEffect=new Audio,n.highlightEffect.src=Je.a,n.state={activeButton:"play",allowToggle:!1},n.clock=new M.Clock,n.buttons=["disc","settings","hide","rewind","play","fastforward","repeat","stop","advanced"],n.onMouseMoveThrottled=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;return function(a){var i=new Date;i-n>=t&&(e(a),n=i)}}(n.onMouseMove.bind(k()(n)),100),R(k()(n)),n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.setupScene(),this.setupKeyboardListeners()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.activeButton!==t.activeButton||(this.props.hidden!==e.hidden||this.props.paused!==e.paused||this.props.repeat!==e.repeat||this.props.playing!==e.playing)}},{key:"componentDidUpdate",value:function(e,t){if(this.state.activeButton!==t.activeButton){var n=re()(this.menuElements[this.state.activeButton].position,2),a=n[0],i=n[1];this.orbits.pink.position.set(a,i,2),this.orbits.purple.position.set(a,i,2.03)}}},{key:"onResize",value:function(){var e=D(),t=.75*e;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"onMouseDown",value:function(e){var t=this;if(e.stopPropagation(),!this.props.hidden){this.raycaster.setFromCamera(this.mouse,this.camera);var n=this.raycaster.intersectObjects(this.planes);if(n.length>0){var a=n[0].object.material.userData.onClick,i=n[0].object;"running"===this.props.audioManager.analyser.audioContext.state?(this.buttonEffect.currentTime=0,this.buttonEffect.play(),this.triggerButtonCallback(i,a)):this.props.audioManager.analyser.audioContext.resume().then((function(){t.buttonEffect.currentTime=0,t.buttonEffect.play(),t.triggerButtonCallback(i,a)})).catch((function(e){return console.log(e)}))}}}},{key:"onMouseMove",value:function(e){var t=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(e.clientX-1.5*t.left)/(t.width-t.left)*2-1,this.mouse.y=-(e.clientY-t.top)/(t.bottom-t.top)*2+1,this.manageActiveButton()}},{key:"setupKeyboardListeners",value:function(){var e=this;window.addEventListener("keydown",(function(t){var n=e.buttons.indexOf(e.state.activeButton);switch(t.code){case"ArrowRight":2!==n&&5!==n&&(n+=1);break;case"ArrowLeft":3!==n&&6!==n&&(n-=1);break;case"ArrowUp":n-=3;break;case"ArrowDown":n+=3;break;case"Enter":var a=e.buttons[n],i=e.planes.find((function(e){return e.name===a}));"running"===e.props.audioManager.analyser.audioContext.state?(e.buttonEffect.currentTime=0,e.buttonEffect.play(),e.triggerButtonCallback(i,e.menuElements[a].onClick)):e.props.audioManager.analyser.audioContext.resume().then((function(){e.buttonEffect.currentTime=0,e.buttonEffect.play(),e.triggerButtonCallback(i,e.menuElements[a].onClick)})).catch((function(e){return console.log(e)}));break;default:n=-1}n>=0&&n<e.buttons.length&&e.setState({activeButton:e.buttons[n]},(function(){return e.playHighlight()}))}))}},{key:"setupScene",value:function(){var e=D(),t=.75*e,n=new M.Scene,a=new M.PerspectiveCamera(2.5,e/t,1,500);a.aspect=e/t,a.position.z=360,a.position.y=.5,a.updateProjectionMatrix();var i=new M.WebGLRenderer({alpha:!0,antialias:!1});i.setSize(e,t),this.mouse=new M.Vector2,this.raycaster=new M.Raycaster,this.scene=n,this.camera=a,this.renderer=i,this.mount.appendChild(this.renderer.domElement),this.createMenuElements(),this.setupOrbAnimation(),this.setupEventListeners(),this.props.setAnimationCallback(this.animate)}},{key:"setupEventListeners",value:function(){var e=this,t=this.renderer.domElement;window.addEventListener("resize",(function(){clearTimeout(e.timeOut),e.timeOut=setTimeout(e.onResize,250)})),window.addEventListener("orientationchange",(function(){e.onResize()})),t.addEventListener("mousedown",(function(t){return e.onMouseDown(t)}),!1),t.addEventListener("mousemove",(function(t){return e.onMouseMoveThrottled(t)}),!1)}},{key:"setupOrbAnimation",value:function(){var e=(new M.TextureLoader).load(Xe.a);e.magFilter=M.NearestFilter,e.minFilter=M.NearestFilter,this.textureAnimator=new P(e,455,40);var t=new M.MeshBasicMaterial({map:e,transparent:!0,name:"advanced",userData:{animationDelay:900,animationDuration:300,showShadow:!0,onClick:this.props.toggleAbout}}),n=new M.Mesh(He,t);n.position.set(2.25,-4.3,1),n.name="advanced",Ge.magFilter=M.NearestFilter,Ge.minFilter=M.NearestFilter;var a=new M.MeshBasicMaterial({map:Ge,transparent:!0,opacity:.5,userData:{animationDelay:900,animationDuration:300}}),i=new M.Mesh(Ye,a);i.position.set(2.25,-4.3-1.025,.5),this.shadowPlanes.push(i),this.scene.add(i),this.planes.push(n),this.scene.add(n)}},{key:"placeOrbitsInScene",value:function(){var e=new M.Mesh(je,Ue),t=new M.Mesh(je,Be);e.position.set(0,-2.15,2),e.rotateX(.35),e.rotateZ(-.8),t.position.set(0,-2.15,2.03),t.rotateZ(.8),t.rotateX(.25),t.rotateY(1),this.orbits={pink:e,purple:t},this.scene.add(e,t)}},{key:"placeInScene",value:function(e){var t=e.name,n=void 0===t?"":t,a=e.position,i=e.onClick,r=e.mapSrc,o=e.animationDelay,s=e.animationDuration,l=e.showShadow,c=re()(a,3),u=c[0],d=c[1],p=c[2],h=(new M.TextureLoader).load(r);h.magFilter=M.NearestFilter,h.minFilter=M.NearestFilter;var m=new M.MeshBasicMaterial({map:h,transparent:!0,name:n,userData:{onClick:i,animationDelay:o,animationDuration:s}}),f=new M.Mesh(He,m);if(f.position.set(u,d,p),f.name=n,l){Ge.magFilter=M.NearestFilter,Ge.minFilter=M.NearestFilter;var g=new M.MeshBasicMaterial({map:Ge,transparent:!0,opacity:.5,name:n,userData:{animationDelay:o,animationDuration:s}}),y=new M.Mesh(Ye,g);y.position.set(u,d-1.025,p-.5),this.shadowPlanes.push(y),this.scene.add(y)}this.planes.push(f),this.scene.add(f)}},{key:"orbitButton",value:function(){var e=this.orbits,t=e.pink,n=e.purple;this.props.hidden?(t.material.visible=!1,n.material.visible=!1):(t.material.visible=!0,n.material.visible=!0,t.rotateY(-.065),n.rotateY(.07))}},{key:"manageActiveButton",value:function(){this.raycaster.setFromCamera(this.mouse,this.camera);var e=this.raycaster.intersectObjects(this.planes);if(e.length>0){var t=e[0].object.material.name;t&&t!==this.state.activeButton&&(this.setState({activeButton:t}),this.playHighlight()),document.body.classList.add("pointer")}else document.body.classList.remove("pointer")}},{key:"hideMenu",value:function(){var e=this;if(this.props.hidden)return this.showIfHidden();this.playHighlight(),this.planes.forEach((function(e){var t=e.position,n=t.x,a=t.y,i=t.z;Ve(e,new M.Vector3(n,a-10,i))})),this.shadowPlanes.forEach((function(e){e.visible=!1})),this.props.hideDash(),setTimeout((function(){return e.setState({allowToggle:!0})}),1400)}},{key:"animate",value:function(){le.update(),this.orbitButton();var e=this.clock.getDelta();this.renderer.render(this.scene,this.camera),this.textureAnimator.update(1e3*e)}},{key:"showIfHidden",value:function(){var e=this;this.state.allowToggle&&this.props.hidden&&(this.props.showIfHidden(),this.setState({allowToggle:!1}),this.planes.forEach((function(e){var t=e.position,n=t.x,a=t.y,i=t.z;Ve(e,new M.Vector3(n,a+10,i))})),setTimeout((function(){e.shadowPlanes.forEach((function(e){e.visible=!0}))}),1e3))}},{key:"triggerButtonCallback",value:function(e,t){new le.Tween(e.scale).to({x:1.5,y:1.5,z:1.5},100).easing(le.Easing.Quadratic.Out).start(),setTimeout((function(){new le.Tween(e.scale).to({x:1,y:1,z:1},100).easing(le.Easing.Quadratic.In).start()}),250),t()}},{key:"getToolTip",value:function(){var e=this.props,t=e.playing,n=e.paused,a=e.repeat;return{disc:function(){return r.a.createElement("p",null,"Choose Songs")},settings:function(){return r.a.createElement("p",null,"Coming Soon")},hide:function(){return r.a.createElement("p",null,"Hide")},rewind:function(){return r.a.createElement("p",null,"Rewind")},fastforward:function(){return r.a.createElement("p",null,"Fast Forward")},play:function(){var e=r.a.createElement("p",null,"Play / Pause");return t?e=r.a.createElement("p",null,r.a.createElement("strong",null,"Play "),"/ Pause"):n&&(e=r.a.createElement("p",null,"Play / ",r.a.createElement("strong",null,"Pause"))),e},repeat:function(){var e=r.a.createElement("p",null,"Repeat: 1 / All / ",r.a.createElement("strong",null,"Off"));return"track"===a?e=r.a.createElement("p",null,"Repeat: ",r.a.createElement("strong",null,"1")," / All / Off"):"context"===a&&(e=r.a.createElement("p",null,"Repeat: 1 / ",r.a.createElement("strong",null,"All")," / Off")),e},stop:function(){return r.a.createElement("p",null,"Stop")},advanced:function(){return r.a.createElement("p",null,"About")}}[this.state.activeButton]()}},{key:"createMenuElements",value:function(){var e,t,n,a=this,i=(e=this.props.audioManager,t=this.hideMenu,n=this.props.toggleMenu,[{name:"disc",position:[-2.25,0,1],onClick:function(){setTimeout(n(),500)},animationDuration:400,animationDelay:220,mapSrc:ye.a,showShadow:!1},{name:"settings",position:[0,0,1],onClick:function(){},animationDelay:100,animationDuration:400,mapSrc:be.a,showShadow:!1},{name:"hide",position:[2.25,0,1],onClick:t,animationDelay:180,animationDuration:400,mapSrc:ke.a,showShadow:!1},{name:"rewind",position:[-2.25,-2.15,1],onClick:e.previousTrack,animationDelay:500,animationDuration:350,mapSrc:Ee.a,showShadow:!1},{name:"play",position:[0,-2.15,1],onClick:e.togglePlay,animationDelay:300,animationDuration:350,mapSrc:Ae.a,showShadow:!1},{name:"fastforward",position:[2.25,-2.15,1],onClick:e.nextTrack,animationDelay:280,animationDuration:350,mapSrc:Re.a},{name:"repeat",position:[-2.25,-4.3,1],onClick:e.toggleRepeat,animationDelay:600,animationDuration:300,mapSrc:Oe.a,showShadow:!0},{name:"stop",position:[0,-4.3,1],onClick:e.stop,animationDelay:700,animationDuration:300,mapSrc:Te.a,showShadow:!0}]);i.forEach((function(e){return a.placeInScene(e)})),this.menuElements=i.reduce((function(e,t){var n=t.name,a=t.position,i=t.onClick;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){B()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(B()({},n,{onClick:i,position:a}),e)}),{}),this.menuElements.advanced={onClick:this.props.toggleAbout,position:[2.25,-4.3,1]},this.placeOrbitsInScene()}},{key:"playHighlight",value:function(){void 0===window.orientation&&"running"===this.props.audioManager.analyser.audioContext.state&&(this.highlightEffect.currentTime=0,this.highlightEffect.play())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{onClick:this.showIfHidden,className:"menu",ref:function(t){e.mount=t}}),r.a.createElement("div",{className:"tooltips"},this.getToolTip()))}}]),t}(r.a.Component);et.propTypes={toggleMenu:A.a.func.isRequired,repeat:A.a.oneOf(["off","context","track"]).isRequired,hideDash:A.a.func.isRequired,hidden:A.a.bool.isRequired,showIfHidden:A.a.func.isRequired};var tt=et,nt=function(e){return r.a.createElement("div",{className:"About"},r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,"About"),r.a.createElement("div",{className:"playlists"},r.a.createElement("p",null,r.a.createElement("em",null,"Your scientists were so preoccupied with whether or not they could, they didn’t stop to think if they should.")),r.a.createElement("p",null,"Saturn.fm is a recreation of the Sega Saturn BIOS CD player interface built with Javascript."),r.a.createElement("p",null,"Development is ongoing: if you have any feedback, bug reports or suggestions please let me know!"),r.a.createElement("ul",null,r.a.createElement("li",null,"💌 ",r.a.createElement("a",{href:"mailto:mcamis@gmail.com"},"mcamis@gmail.com")),r.a.createElement("li",null,"🐦 ",r.a.createElement("a",{href:"https://twitter.com/vmu_beep"},"twitter.com/vmu_beep")),r.a.createElement("li",null,"👨🏻‍🚀 ",r.a.createElement("a",{href:"https://adam.mcamis.lol"},"adam.mcamis.lol")),r.a.createElement("li",null,"🐙 ",r.a.createElement("a",{href:"https://github.com/mcamis/saturn.fm"},"github.com/mcamis/saturn.fm")))),r.a.createElement("button",{type:"button",onClick:e.toggleAbout},"Close")))};nt.propTypes={toggleAbout:A.a.func.isRequired};var at=nt,it=n(41),rt=function(){return r.a.createElement("svg",{version:"1.0",width:"400pt",height:"400pt",viewBox:"0 0 75 75",style:{width:"20px",height:"20px"}},r.a.createElement("g",{stroke:"#FFF",strokeWidth:"5"},r.a.createElement("path",{strokeLinejoin:"round",fill:"#FFF",d:"M39.389 13.769L22.235 28.606H6v19.093h15.989l17.4 15.051V13.769z"}),r.a.createElement("path",{d:"M48.128 49.03c1.929-3.096 3.062-6.739 3.062-10.653 0-3.978-1.164-7.674-3.147-10.8M55.082 20.537c3.695 4.986 5.884 11.157 5.884 17.84 0 6.621-2.151 12.738-5.788 17.699M61.71 62.611c5.267-6.666 8.418-15.08 8.418-24.233 0-9.217-3.192-17.682-8.519-24.368",fill:"none",strokeLinecap:"round"})))},ot=function(){return r.a.createElement("svg",{viewBox:"0 -256 1792 1792",style:{width:"100%"}},r.a.createElement("path",{d:"M709.42373 455.0508v576q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-576q0-14 9-23t23-9h64q14 0 23 9t9 23zm256 0v576q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-576q0-14 9-23t23-9h64q14 0 23 9t9 23zm256 0v576q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-576q0-14 9-23t23-9h64q14 0 23 9t9 23zm128 724v-948h-896v948q0 22 7 40.5t14.5 27q7.5 8.5 10.5 8.5h832q3 0 10.5-8.5t14.5-27q7-18.5 7-40.5zm-672-1076h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z",fill:"currentColor"}))},st=n(78),lt=n.n(st),ct=n(79),ut=n.n(ct);async function dt(e){var t={};try{t=await function(e){return new Promise((function(t,n){lt.a.read(e,{onSuccess:function(e){return t(e)},onError:function(e){return n(e)}})}))}(e)}catch(e){console.log("Fetching Tags Error",e)}var n=t.tags,a=(n=void 0===n?{}:n).artist,i=void 0===a?"":a,r=n.album,o=void 0===r?"":r,s=n.title,l=void 0===s?e.name:s,c=n.track;return{file:e,track:void 0===c?0:c,artist:i,album:o,title:l}}async function pt(e){var t;try{t=await async function(e){var t=e.extensions,n=void 0===t?null:t,a=e.allowDirectory,i=void 0!==a&&a;return new Promise((function(e){var t=document.createElement("input");n&&t.setAttribute("accept",n),t.type="file",t.multiple=!0,t.webkitdirectory=i,t.directory=i,t.mozdirectory=i,t.addEventListener("change",(function(t){e(t.target.files)})),t.click()}))}(e)}catch(e){console.log(e)}return await async function(e){var t=[],n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;s.type.includes("audio")&&t.push(dt(s))}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return(await Promise.all(t)).reduce((function(e,t){return e[ut()()]=t,e}),{})}(t)}var ht=function(e){function t(e){var n;return h()(this,t),(n=y()(this,b()(t).call(this,e))).onDragEnd=n.onDragEnd.bind(k()(n)),n}return E()(t,e),f()(t,[{key:"onDragEnd",value:function(e){if(e.destination){var t=function(e,t,n){var a=Array.from(e),i=a.splice(t,1),r=re()(i,1)[0];return a.splice(n,0,r),a}(this.props.audio.playlist,e.source.index,e.destination.index);this.props.setCurrentTrack(e.destination.index),this.props.arrangeTracks(t)}}},{key:"getTracks",value:async function(){var e=await pt({extensions:".mp3, .m4a, .flac, .wav, .aac"});this.props.addTracks(e)}},{key:"getDirectory",value:async function(){var e=await pt({extensions:".mp3, .wav, .aac",allowDirectory:!0});this.props.addTracks(e)}},{key:"render",value:function(){var e=this,t=this.props.audio,n=t.currentTrack,a=t.playing,i=t.playlist,o=t.tracks;return r.a.createElement("div",{className:"FileReader"},r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,"Edit Playlist"),r.a.createElement("h3",null,"Drag to reorder tracks"),r.a.createElement("div",{className:"playlists"},r.a.createElement(it.a,{onDragEnd:this.onDragEnd},r.a.createElement(it.c,{droppableId:"droppable"},(function(t){return r.a.createElement("div",{ref:t.innerRef},i.map((function(t,s){var l=o[t],u=l.artist,d=l.album,p=l.title,h=a&&t===i[n];return r.a.createElement(it.b,{key:t,draggableId:t,index:s},(function(t,n){var a,i=n.isDragging;return r.a.createElement("div",c()((a={className:"draggable"},B()(a,"className",function(e){var t=e.isDragging,n=e.currentPlaying;return"draggable ".concat(t?"isDragging":""," ").concat(n?"currentTrack":"")}({isDragging:i,currentPlaying:h})),B()(a,"ref",t.innerRef),a),t.draggableProps,t.dragHandleProps),r.a.createElement("div",null,h&&r.a.createElement(rt,null)),r.a.createElement("div",null,p),r.a.createElement("div",null,u),r.a.createElement("div",null,d),r.a.createElement("button",{className:"icon-button",onClick:function(){return e.props.removeTrack(s)},type:"button"},r.a.createElement(ot,null)))}))})),t.placeholder)})))),r.a.createElement("button",{className:"add-files",type:"button",onClick:function(){return e.getDirectory()}},"Add a directory"),r.a.createElement("button",{className:"add-files",type:"button",onClick:function(){return e.getTracks()}},"Add file(s)"),r.a.createElement("button",{type:"button",onClick:this.props.toggleMenu},"Close")))}}]),t}(i.Component);ht.propTypes={audio:A.a.shape({tracks:A.a.object.isRequired,playlist:A.a.array.isRequired}).isRequired,arrangeTracks:A.a.func.isRequired,addTracks:A.a.func.isRequired,removeTrack:A.a.func.isRequired,toggleMenu:A.a.func.isRequired};var mt=ht,ft=n(83),gt=n.n(ft),yt=n(84),vt=n.n(yt);var bt=function(e){var t,n,a,o=e.audioManager,s=e.currentTrack,l=Object(i.useState)(0),c=re()(l,2),u=c[0],d=c[1];return t=function(){d(o.currentTime)},n=1e3,a=Object(i.useRef)(),Object(i.useEffect)((function(){a.current=t})),Object(i.useEffect)((function(){if(null!==n){var e=setInterval((function(){a.current()}),n);return function(){return clearInterval(e)}}}),[n]),r.a.createElement("header",null,r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"track"},r.a.createElement("img",{src:vt.a,alt:"TODO"})),r.a.createElement("div",{className:"track-number"},"".concat(s+1)),r.a.createElement("div",{className:"time"},r.a.createElement("img",{src:gt.a,alt:"TODO"})),r.a.createElement("div",{className:"timer"},O(u))),r.a.createElement("div",{className:"knight-rider"}))},wt={plain:[2.5,-3.5,510],spinny:[-2.5,3.5,505],fast:[0,3,510]},kt=function(e){function t(e){var n;h()(this,t),(n=y()(this,b()(t).call(this,e))).timeOut=null,R(k()(n));var a=new M.BufferGeometry,i=new Float32Array([-1,-1,1,1,-1,1,1,1,1,1,1,1,-1,1,1,-1,-1,1]);a.setAttribute("position",new M.BufferAttribute(i,3)),n.blueMaterial=new M.MeshBasicMaterial({color:7707903}),n.redMaterial=new M.MeshBasicMaterial({color:16741754}),n.yellowMaterial=new M.MeshBasicMaterial({color:15589691}),n.whiteMaterial=new M.MeshBasicMaterial({color:16777215}),n.starGeometry=a;var r=D(),o=window.innerHeight;return n.width=1.75*r,n.height=1.75*o,window.addEventListener("resize",(function(){clearTimeout(n.timeOut),n.timeOut=setTimeout(n.onResize,250)})),window.addEventListener("orientationchange",(function(){n.onResize()})),n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.setupScene()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.hidden!==e.hidden||this.props.animation!==e.animation}},{key:"componentDidUpdate",value:function(e){if(this.props.animation!==e.animation){var t=re()(wt[this.props.animation],3),n=t[0],a=t[1],i=t[2];this.spaceShip.position.set(n,a,i)}}},{key:"onResize",value:function(){var e=D(),t=window.innerHeight;this.width=1.75*e,this.height=1.75*t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}},{key:"setupScene",value:function(){var e=D(),t=window.innerHeight,n=new M.Scene,a=new M.PerspectiveCamera(100,e/t,1,1e3),i=new M.DirectionalLight(16777215,3),r=new M.DirectionalLight(16777215,2),o=new M.DirectionalLight(16777215,2);i.position.set(-10,46,600),r.position.set(-200,46,500),o.position.set(200,46,500),n.add(i,r,o);var s=new M.WebGLRenderer({alpha:!0,antialias:!1});s.setClearColor(16777215),a.position.z=500;var l=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),c=window.devicePixelRatio;s.setPixelRatio(1===c||l?.65*c:.25*c),s.setSize(e,t),s.setClearColor(0,0),this.camera=a,this.renderer=s,this.scene=n,this.stars=this.stars||[],this.mount.appendChild(this.renderer.domElement),this.setupSpaceShip(),this.addStars(),this.props.setAnimationCallback(this.animate)}},{key:"setupSpaceShip",value:function(){var e=this;(new se.a).load("./models/saturn_v1.gltf",(function(t){var n=t.scene,a=re()(wt[e.props.animation],3),i=a[0],r=a[1],o=a[2];n.position.set(i,r,o),n.rotateZ(3.5),n.rotateY(Math.PI),n.visible=!1;var s=n.children[1].material.map;s.magFilter=M.LinearFilter,s.minFilter=M.LinearFilter,s.generateMipmaps=!1,e.spaceShip=n,window.ship=n,e.scene.add(n)}))}},{key:"animate",value:function(){this.animateStars(),this.renderScene(),this.spaceShip&&(this.props.hidden?(this.spaceShip.visible=!0,"plain"===this.props.animation?this.plain():"spinny"===this.props.animation?this.spinny():"fast"===this.props.animation&&this.fast()):this.spaceShip.visible=!1)}},{key:"plain",value:function(){this.spaceShip.rotateZ(.01),this.spaceShip.position.z-=.045,this.spaceShip.position.z<400&&this.props.setRandomAnimation()}},{key:"spinny",value:function(){this.spaceShip.rotateZ(.0025),this.spaceShip.position.z-=.2,this.spaceShip.position.x+=.05,this.spaceShip.position.y+=.025,this.spaceShip.position.z<400&&this.props.setRandomAnimation()}},{key:"fast",value:function(){this.spaceShip.rotateZ(-.005),this.spaceShip.position.z-=.05,this.spaceShip.position.x-=.0075,this.spaceShip.position.z<400&&this.props.setRandomAnimation()}},{key:"addStars",value:function(){for(var e=-500;e<500;e+=15){var t=this.whiteMaterial;e>0&&e<100?t=this.redMaterial:e>100&&e<200?t=this.yellowMaterial:e>100&&e<200&&(t=this.blueMaterial);var n=new M.Mesh(this.starGeometry,t);n.position.x=F(this.width),n.position.y=F(this.height),n.position.z=e,n.scale.set(z(),z(),1),this.scene.add(n),this.stars.push(n)}}},{key:"animateStars",value:function(){for(var e=0;e<this.stars.length;e++){var t=this.stars[e];t.position.z+=4*Math.random()+8,t.position.z>550&&(t.position.z-=800,t.position.x=F(this.width),t.position.y=F(this.height))}}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"StarField"},r.a.createElement("div",{ref:function(t){e.mount=t}}))}}]),t}(r.a.Component),xt=function(e){var t=e.href,n=e.artist,a=e.title;return r.a.createElement("div",{className:"current-track-info",key:a+n},r.a.createElement("p",null,a," ",n&&r.a.createElement(r.a.Fragment,null,"- ",n)),t&&r.a.createElement("p",null,r.a.createElement("a",{href:t,target:"blank"},t)))},Et=function(e){function t(e){var n;return h()(this,t),n=y()(this,b()(t).call(this,e)),R(k()(n)),n.audioManager=new ae,n.state={animation:"plain",show:!1,hidden:!1,showAboutModal:!1,fileReaderVisible:!1,frameCallbacks:[]},n.frameId=null,n}return E()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.frameId=requestAnimationFrame(this.animate)}},{key:"getClassNames",value:function(){var e=this.props.audio,t=e.playing,n=e.paused,a=this.state.hidden?"hidden":"",i=n?"paused":"",r=t?"playing":"",o=this.state.show?"show":"";return"".concat(a," ").concat(i," ").concat(r," ").concat(o)}},{key:"hideDash",value:function(){var e=["plain","spinny","fast"],t=e[Math.floor(Math.random()*e.length)];this.setState((function(e){return{hidden:!e.hidden,show:!1,animation:t}}))}},{key:"setRandomAnimation",value:function(){var e=this,t=["plain","spinny","fast"].filter((function(t){return t!==e.state.animation})),n=t[Math.floor(Math.random()*t.length)];this.setState({animation:n})}},{key:"showIfHidden",value:function(){this.state.hidden&&(this.frameId=this.frameId||requestAnimationFrame(this.animate),this.setState({hidden:!1,show:!0}))}},{key:"setAnimationCallback",value:function(e){this.setState((function(t){return{frameCallbacks:[].concat(d()(t.frameCallbacks),[e])}}))}},{key:"animate",value:function(){this.state.frameCallbacks.forEach((function(e){return e()})),this.frameId=requestAnimationFrame(this.animate)}},{key:"toggleMenu",value:function(){this.frameId?(cancelAnimationFrame(this.frameId),this.frameId=void 0):requestAnimationFrame(this.animate),this.setState((function(e){return{fileReaderVisible:!e.fileReaderVisible}}))}},{key:"render",value:function(){var e=this,t=this.props.audio,n=t.playing,i=t.paused,o=t.repeat,s=t.playlist,l=t.currentTrack,u=t.tracks[s[l]];return console.log(this.audioManager.analyser.audioContext.state),r.a.createElement("div",{className:this.getClassNames()},r.a.createElement(bt,{currentTrack:this.props.audio.currentTrack,audioManager:this.audioManager}),r.a.createElement(tt,{audioManager:this.audioManager,hidden:this.state.hidden,showIfHidden:this.showIfHidden,toggleMenu:this.toggleMenu,toggleAbout:function(){return e.setState((function(e){return{showAboutModal:!e.showAboutModal}}))},hideDash:this.hideDash,repeat:o,paused:i,playing:n,setAnimationCallback:this.setAnimationCallback}),r.a.createElement("div",{className:"dashboard"}),r.a.createElement(fe,{audioManager:this.audioManager,paused:i,playing:n,setAnimationCallback:this.setAnimationCallback}),this.props.toast&&r.a.createElement("p",null,this.props.toast),r.a.createElement(kt,{animation:this.state.animation,hidden:this.state.hidden,setAnimationCallback:this.setAnimationCallback,setRandomAnimation:this.setRandomAnimation}),this.state.fileReaderVisible&&r.a.createElement("div",{className:"overlay"},r.a.createElement(mt,c()({audio:this.props.audio},a,{toggleMenu:this.toggleMenu}))),this.state.showAboutModal&&r.a.createElement("div",{className:"overlay"},r.a.createElement(at,{toggleAbout:function(){return e.setState((function(e){return{showAboutModal:!e.showAboutModal}}))}})),u&&r.a.createElement(xt,u),"suspended"===this.audioManager.analyser.audioContext.state&&r.a.createElement("div",{className:"start-context"},r.a.createElement("button",{onClick:function(){return e.audioManager.analyser.audioContext.resume().then((function(){return e.forceUpdate()}))}},r.a.createElement("span",null,"Press Start")," スタート")))}}]),t}(i.Component);Et.propTypes={audio:A.a.shape({currentTrack:A.a.number,playing:A.a.bool.isRequired,paused:A.a.bool.isRequired,repeat:A.a.oneOf(["off","context","track"]).isRequired}).isRequired};var St=Object(C.b)((function(e){return{audio:e.audio}}))(Et),At=n(13),Ct=Object(At.c)({audio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYING":return V({},e,{playing:!0,paused:!1});case"PAUSED":return V({},e,{playing:!1,paused:!0});case"TOGGLE_REPEAT":return V({},e,{repeat:t.data.repeat});case"SET_CURRENT_TRACK":return V({},e,{currentTrack:t.data.trackIndex});case"ADD_TRACKS":return V({},e,{tracks:V({},e.tracks,{},t.data.tracks),playlist:[].concat(d()(e.playlist),d()(Object.keys(t.data.tracks).sort((function(e,n){var a=t.data.tracks[e],i=t.data.tracks[n];return a.album>i.album?1:a.album<i.album?-1:a.track>i.track?1:a.track<i.track?-1:void 0}))))});case"ARRANGE_TRACKS":return V({},e,{playlist:t.data.playlist});case"REMOVE_TRACK":var n=e.playlist[t.datatrackIndex],a=e.tracks,i=(a[n],q()(a,[n].map(Y)));return V({},e,{playlist:[].concat(d()(e.playlist.slice(0,t.data.trackIndex)),d()(e.playlist.slice(t.data.trackIndex+1))),tracks:V({},i)});default:return e}}});n(150);var Rt=n(166);n.d(t,"store",(function(){return Mt})),Rt.a({dsn:"https://992c24dba9924e9a9431f74d2b9515a6@sentry.io/1830195"});var Mt=Object(At.e)(Ct,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());function Tt(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}window.addEventListener("resize",(function(){Tt()})),window.addEventListener("orientationchange",(function(){Tt()})),setTimeout((function(){Tt(),s.a.render(r.a.createElement(C.a,{store:Mt},r.a.createElement(St,null)),document.getElementById("root"))}),100)},63:function(e,t,n){e.exports=n.p+"songs/05_No_Refuge.mp3"},64:function(e,t,n){e.exports=n.p+"images/disc.png"},65:function(e,t,n){e.exports=n.p+"images/more.png"},66:function(e,t,n){e.exports=n.p+"images/hide.png"},67:function(e,t,n){e.exports=n.p+"images/rwd.png"},68:function(e,t,n){e.exports=n.p+"images/play-pause.png"},69:function(e,t,n){e.exports=n.p+"images/ffwd.png"},70:function(e,t,n){e.exports=n.p+"images/stop.png"},71:function(e,t,n){e.exports=n.p+"images/repeat.png"},72:function(e,t,n){e.exports=n.p+"images/texture.gif"},73:function(e,t,n){e.exports=n.p+"images/pink.gif"},74:function(e,t,n){e.exports=n.p+"images/orb-shadow.png"},75:function(e,t,n){e.exports=n.p+"images/test.png"},76:function(e,t,n){e.exports=n.p+"songs/button-press.mp3"},77:function(e,t,n){e.exports=n.p+"songs/button-highlight.mp3"},83:function(e,t,n){e.exports=n.p+"images/time.png"},84:function(e,t,n){e.exports=n.p+"images/track.png"},98:function(e,t,n){e.exports=n.p+"songs/01_Chaos.mp3"},99:function(e,t,n){e.exports=n.p+"songs/02_Akihabara.mp3"}});
//# sourceMappingURL=app.4c0013f1c7c34abe2078.js.map